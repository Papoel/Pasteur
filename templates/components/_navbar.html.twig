{% set currentRoute = app.request.attributes.get('_route') %}
<!-- Navbar goes here -->
<header>
    <nav class="bg-indigo-900 shadow-lg">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex justify-between">
                <div class="flex space-x-28">
                    <div>
                        <!-- Website Logo -->
                        <a href="{{ path('app_home') }}" class="flex items-center py-4 px-2">
                            <span class="font-semibold text-gray-100 text-2xl">APERP</span>
                        </a>
                    </div>
                    <!-- Primary Navbar items -->
                    <div class="hidden md:flex items-center space-x-1">
                        <a href="{{ path('app_home') }}" class="{{ currentRoute=='app_home' ? 'text-indigo-100 border-b-4 border-indigo-400' : 'py-4 px-2 text-gray-400 font-semibold hover:text-indigo-400 transition duration-300' }}">Accueil</a>
                        <a href="{{ path('app_events') }}" class="{{ currentRoute=='app_events' ? 'text-indigo-100 border-b-4 border-indigo-400' : 'py-4 px-2 text-gray-400 font-semibold hover:text-indigo-400 transition duration-300' }}">Événements</a>
                        <a href="{{ path('app_contact') }}" class="{{ currentRoute=='app_contact' ? 'text-indigo-100 border-b-4 border-indigo-400' : 'py-4 px-2 text-gray-400 font-semibold hover:text-indigo-400 transition duration-300' }}">Contact</a>
                        <a href="{{ path('app_cgu') }}" class="py-4 px-2 text-gray-400 font-semibold hover:text-indigo-400 transition duration-300">CGU</a>
                    </div>
                </div>
                <!-- Secondary Navbar items -->
                <div class="hidden md:flex items-center space-x-3">
                    {% if app.user %}
                        {% if is_granted('ROLE_ADMIN') == true %}
                            <button id="dropdownApeTeamButtonDesktop" data-dropdown-toggle="dropdownApeTeamDesktop"
                                    class="flex items-center font-semibold text-white rounded-full hover:text-white md:mr-0" type="button">
                                <span class="sr-only">Menu APE</span>
                                {{ app.user.fullname }}
                                <svg class="w-4 h-4 mx-1.5" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                            </button>

                            <!-- Dropdown menu -->
                            <div id="dropdownApeTeamDesktop" class="z-10 hidden bg-indigo-900 divide-y divide-gray-100 rounded-sm shadow w-44">
                                <div class="px-4 py-3 text-base text-gray-200">
                                    <div class="text-green-300">{{ app.user.function }}</div>
                                </div>
                                <ul class="py-2 text-sm text-gray-100" aria-labelledby="dropdownApeTeamButtonDesktop">
                                    {% if is_granted('ROLE_ADMIN') == true %}
                                        <li>
                                            <a href="{{ path('admin') }}" class="block text-base px-2 py-4 text-white hover:bg-indigo-500 hover:text-white hover:bg-indigo-500 hover:text-white hover:font-semibold transition duration-300">
                                                Administration
                                            </a>
                                        </li>
                                        <li>
                                            <a href="{{ path('app_user_profile', {'user': app.user.id}) }}" class="block text-base px-2 py-4 text-white hover:bg-indigo-500 hover:text-white hover:font-semibold transition duration-300">
                                                Mes informations
                                            </a>
                                        </li>
                                    {% endif %}
                                </ul>
                                <div class="py-2">
                                    <a href="{{ path('app_logout') }}" class="block text-base px-2 py-4 text-red-500 hover:font-semibold hover:tracking-wide transition duration-300">
                                        Déconnexion
                                    </a>
                                </div>
                            </div>
                        {% endif %}
                    {% else %}
                        <a href="{{ path('app_login') }}" class="py-2 px-2 font-medium text-white bg-indigo-600 rounded hover:bg-indigo-500 transition duration-300">
                            Connexion
                        </a>
                    {% endif %}
                </div>
                <!-- Mobile menu button -->
                <div class="md:hidden flex items-center">
                    <button class="outline-none mobile-menu-button">
                        <svg class=" w-6 h-6 text-white hover:text-indigo-400 "
                             x-show="!showMenu"
                             fill="none"
                             stroke-linecap="round"
                             stroke-linejoin="round"
                             stroke-width="2"
                             viewBox="0 0 24 24"
                             stroke="currentColor"
                        >
                            <path d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <!-- mobile menu -->
        <div class="hidden mobile-menu">
            <ul class="">
                <li class="{{ currentRoute=='app_home' ? 'active' }}"><a href="{{ path('app_home') }}" class="block text-base px-2 py-4 text-white hover:bg-indigo-500 hover:font-semibold">Accueil</a></li>
                <li class="{{ currentRoute=='app_events' ? 'active' }}"><a href="{{ path('app_events') }}" class="block text-base px-2 py-4 text-white hover:bg-indigo-500 hover:font-semibold transition duration-300">Événements</a></li>
                <li class="{{ currentRoute=='app_contact' ? 'active' }}"><a href="{{ path('app_contact') }}" class="block text-base px-2 py-4 text-white hover:bg-indigo-500 hover:font-semibold transition duration-300">Contact</a></li>
                {% if not app.user %}
                    <li class="{{ currentRoute=='app_login' ? 'active' }}"><a href="{{ path('app_login') }}" class="block text-base px-2 py-4 text-white hover:bg-indigo-500 hover:font-semibold transition duration-300">Connexion</a></li>
                {% endif %}
            </ul>
            <hr>
            <div class="px-2 pt-2 pb-4">
                {% if is_granted('ROLE_ADMIN') == true %}
                    <button id="dropdownApeTeamButtonMobile" data-dropdown-toggle="dropdownApeTeamMobile"
                            class="flex items-center text-sm font-medium text-indigo-200 rounded-full hover:text-white md:mr-0" type="button">
                        <span class="sr-only">Menu APE</span>
                        {{ app.user.fullname }}
                        <svg class="w-4 h-4 mx-1.5" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                    </button>

                    <!-- Dropdown menu -->
                    <div id="dropdownApeTeamMobile" class="z-10 hidden bg-indigo-900 divide-y divide-gray-100 rounded-sm shadow w-44">
                        <div class="px-4 py-3 text-base text-gray-200">
                             <div class="text-green-300">{{ app.user.function }}</div>
                        </div>
                        <ul class="py-2 text-sm text-gray-100" aria-labelledby="dropdownApeTeamButtonMobile">
                            {% if is_granted('ROLE_ADMIN') == true %}
                                <li>
                                    <a href="{{ path('admin') }}" class="block text-base px-2 py-4 text-white hover:bg-indigo-500 hover:text-white hover:bg-indigo-500 hover:text-white hover:font-semibold transition duration-300">
                                        Administration
                                    </a>
                                </li>
                                <li>
                                    <a href="{{ path('app_user_profile', {'user': app.user.id}) }}" class="block text-base px-2 py-4 text-white hover:bg-indigo-500 hover:text-white hover:font-semibold transition duration-300">
                                        Mes informations
                                    </a>
                                </li>
                            {% endif %}
                        </ul>
                        <div class="py-2">
                            <a href="#" class="block text-base px-2 py-4 text-red-500 hover:font-semibold hover:tracking-wide transition duration-300">
                                Déconnexion
                            </a>
                        </div>
                    </div>
                {% endif %}
            </div>

        </div>
        <script>
            const btn = document.querySelector("button.mobile-menu-button");
            const menu = document.querySelector(".mobile-menu");

            btn.addEventListener("click", () => {
                menu.classList.toggle("hidden");
            });
        </script>
    </nav>
</header>

<!-- Maintenance Alert -->
{# {{ include("messages/maintenace_alert.html.twig") }} #}
<!-- Fin Maintenance Alert -->
